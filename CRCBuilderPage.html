<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--StyleSheet Source: https://bootswatch.com/pulse/-->
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" media="screen">
    <link rel="stylesheet" type="text/css" href="bootstrap.css" media="screen">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--Icons source: https://ionicons.com/-->
    <script type="module" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.js"></script>
    <title>CRC Card Building Page</title>
</head>

<body>
    <div hidden id="userCardNum"></div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="navbar-brand" id="centerBar" style="" \>
            CRC Card Builder Page
            <a target="_blank" rel="noopener noreferrer" HREF="HelpPage.html">
                <span id="helpIcon" data-toggle="popover" data-placement="top" title="Help" role="button">
                    <ion-icon name="help-circle" size="large"></ion-icon>
                </span>
            </a>
        </div>
    </nav>
    <div class="jumbotron" style="margin:0px;padding-top:30px;">
        <div class="card bg-primary mb-3">
          <div class="icon-bar">
                <a target="_blank" rel="noopener noreferrer"HREF="HelpPage.html" class="question"><i class= "fa fa-question-circle"></i></a>
              </div>
            <div class="card-body" id="bodyForAllCards">
                <!--Cards will all go in here-->
            </div>
        </div>
        <div style="text-align:center; padding-top: 10px;">
            <button type=button id="printPageButton" name="print" class="btn btn-primary btn-lg" onclick="window.print()">Print</button>
        </div>
    </div>
</body>
</html>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js?ver=3.3.1"></script>
<script src="https://www.sanwebe.com/wp-content/cache/minify/90c30.js" type="text/javascript"></script>
<script type="text/javascript">

    window.onload = function () {
        var url = document.location.href,
            params = url.split('?')[1].split('&'),
            data = {}, tmp;
        for (var i = 0, l = params.length; i < l; i++) {
            tmp = params[i].split('=');
            data[tmp[0]] = tmp[1];
        }
        document.getElementById('userCardNum').innerHTML = data.number; //this gets the number of cards from the url
        for (let i = 0; i < data.number; i++) {
            $('#bodyForAllCards').append(`
                <div class="card border-secondary mb-3" id="card${i + 1}" style="margin-top:10px;margin-bottom:10px;margin-right:50px;margin-left:50px;" >
                    <div class="text-white bg-dark card-header">
                        CRC Card ${i + 1}
                    </div>
                    <div class="card-body" style="margin:0px;padding:0px;">
                        <table class="table-striped table-bordered" style="width:100%;">

                            <tbody>
                                <tr>
                                    <td class="fieldName">
                                        Card Name
                                    </td>
                                    <td colspan="3">
                                        <div class="CRCCard block" id="name_Card_${i + 1}">
                                            <input size="75" style="width:90%;" onkeyup=editHeader(this)>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="1" class="fieldName">
                                        Superclasses
                                    </td>
                                    <td colspan="3">
                                        <div class="CRCCard block" id="superClasses_Card_${i + 1}">
                                                <input size="85" style="width:90%;">
                                                <ion-icon class="add_field_button addIcon" name="add-circle"></ion-icon>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="1" class="fieldName">
                                        Subclasses
                                    </td>
                                    <td colspan="3">
                                        <div class="CRCCard block" id="subClasses_Card_${i + 1}">
                                            <input size="85" style="width:90%;">
                                            <ion-icon class="add_field_button addIcon" name="add-circle"></ion-icon>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="1" class="fieldName">
                                        Responsibilities
                                    </td>
                                    <td colspan="1">
                                        <div class="CRCCard block input_fields_wrap3" id="responsibilities_Card_${i + 1}">
                                            <input size="45">
                                            <ion-icon class="add_field_button addIcon" name="add-circle"></ion-icon>
                                        </div>
                                    </td>
                                    <td colspan="1" class="fieldName">
                                        Collaborators
                                    </td>
                                    <td colspan="1">
                                        <div class="CRCCard block input_fields_wrap4" id="collaborators_Card_${i + 1}">
                                            <input size="45">
                                            <ion-icon class="add_field_button addIcon" name="add-circle"></ion-icon>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `);
        }
        var max_fields = 10;                        //maximum input boxes allowed

        $('.add_field_button').click(function (e) { //on add input button click
            e.preventDefault();
            var parentID = e.currentTarget.parentElement.id;
            var rowCount = (e.currentTarget.parentElement.children.length) - 1;

            if (rowCount < max_fields) { //max input box allowed

                $(`#${parentID}`).append('<div><input type="text" name="mytext[]"/><a href="#" class="remove_field"><ion-icon class="remove-circle" name="remove-circle"></ion-icon></a></div>'); //add input box

                $(`#${parentID}`).on("click", ".remove_field", function (e) { //user click on remove text
                    e.preventDefault(); $(this).parent('div').remove();
                });
            }
        });
    }

    $(document).ready(function () {


    });

</script>

<style>
    @page {
        size: auto;
        margin: 0mm;
    }

    @media print {

        #printPageButton, .add_field_button.addIcon, .remove_field {
            display: none;
        }

        input, textarea {
            border: none !important;
            box-shadow: none !important;
            outline: none !important;
        }
    }
    .CRCCard {
        padding: 20px;
        font-size: 1.1rem;
    }

    #centerBar {
        font-size: 2em;
        font-weight: 700;
        color: #fff;
        margin-right: auto;
        margin-left: 3%
    }
    .addIcon {
        display: inline-block;
        float: right;
        cursor: pointer;
        font-size: 1.5rem;
        color:green;
    }
    #helpIcon {
        font-size: 32px;
        color: white;
        padding: 0px;
        margin: 0px;
        right: 3%;
        position: absolute;
    }
    h2 {
        padding: 15px;
    }

    div.block {
        overflow: hidden;
        margin-left: auto;
        margin-right: auto;
        max-width: 90%;
        float: none;
    }

        div.block label {
            font-size: 1.05rem;
            width: 120px;
            display: block;
            text-align: left;
            display: inline-block;
        }

        div.block .input {
            margin-left: 4px;
            float: left;
        }

    section {
        overflow: hidden;
        margin-left: auto;
        margin-right: auto;
        max-width: 850px;
        float: none;
    }

    div#one {
        padding: 20px;
        float: left;
    }

    div#two {
        padding: 20px;
    }

    .remove-circle{
        color: red;
        font-size: 1.5rem;
    }

    .fieldName{
        text-align:center;
    }
    .icon-bar {
     position: fixed;
     top: 82%;
     right: 0px;
     -webkit-transform: translateY(-50%);
     -ms-transform: translateY(-50%);
     transform: translateY(-50%);
   }

   .icon-bar a {
     display: block;
     text-align: center;
     padding: 16px;
     transition: all 0.3s ease;
     color: white;
     font-size: 20px;
   }

   .icon-bar a:hover {
     background-color: #337AFF;
   }

   .question {
     background:black ;
   }
</style>
